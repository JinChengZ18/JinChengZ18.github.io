<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html class="dj_gecko dj_contentbox"><head>
     
     <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	 <title></title>
	 <!-- 在techcomp\ria\base\base.jsp基礎之上，修改如下內容：
（1）增加工作流全局url：String workflowPath = request.getContextPath()+"/workflow";
（2）修改了獲取localStr的方式：String localeStr ="zh_CN";

 -->











<!-- 录制脚本 -->
<link href="procmonitor_data/claro.css" rel="stylesheet" type="text/css">
<style>
	@import "/fp/techcomp/ria/unieap/themes/base/css/unieap.css";
	@import "/fp/workflow/themes/ria/default/css/unieap.css";
	@import "/fp/techcomp/ria/base/themes/common.css";
	@import "/fp/techcomp/ria/unieapx/themes/gainsboro/css/query.css";
	@import "/fp/techcomp/ria/unieapx/themes/css/exception.css";
	@import "/fp/techcomp/ria/unieapx/themes/css/MessageCenter.css";
	@import "/fp/techcomp/ria/unieapx/themes/base/css/layout-navigatorcontainer.css";
	@import "/fp/techcomp/ria/unieapx/themes/gainsboro/css/layout-navigatorcontainer.css";
	@import "/fp/techcomp/ria/unieapx/themes/gainsboro/css/form-quicksearch.css";
	@import "/fp/techcomp/ria/unieapx/themes/gainsboro/css/record-script.css";
	body{
		margin : 0px;
		visibility : hidden;
	}
</style>

<!-- 工作流 -->
<link type="text/css" rel="stylesheet" href="procmonitor_data/jquery.css">
<link type="text/css" rel="stylesheet" href="procmonitor_data/dialog.css">

<script type="text/javascript" src="procmonitor_data/dojo.js" djconfig=" parseOnLoad: true,locale:'zh'"></script>
<script type="text/javascript" src="procmonitor_data/dojo-patch.js" charset="utf-8"></script>
<script type="text/javascript" src="procmonitor_data/dijit.js" charset="utf-8"></script>
<script type="text/javascript" src="procmonitor_data/loader.js"></script>
<script type="text/javascript" src="procmonitor_data/boosters.js"></script>
<script type="text/javascript" src="procmonitor_data/application_zh_CN.js"></script>
<script type="text/javascript" src="procmonitor_data/application_zh_CN_002.js"></script>
<script type="text/javascript" src="procmonitor_data/global.js"></script>
<script type="text/javascript" src="procmonitor_data/cache.js"></script>
<script type="text/javascript" src="procmonitor_data/rpc_002.js"></script>
<script type="text/javascript" src="procmonitor_data/Form.js"></script>
<script type="text/javascript" src="procmonitor_data/FieldSet.js"></script>
<script type="text/javascript" src="procmonitor_data/TextBox.js"></script>
<script type="text/javascript" src="procmonitor_data/InlineEditBox.js"></script>
<script type="text/javascript" src="procmonitor_data/Textarea.js"></script>
<script type="text/javascript" src="procmonitor_data/NumberTextBox.js"></script>
<script type="text/javascript" src="procmonitor_data/TextBoxWithIcon.js"></script>
<script type="text/javascript" src="procmonitor_data/ComboBox.js"></script>
<script type="text/javascript" src="procmonitor_data/DateTextBox.js"></script>
<script type="text/javascript" src="procmonitor_data/ComboBoxTree.js"></script>
<script type="text/javascript" src="procmonitor_data/Button.js"></script>
<script type="text/javascript" src="procmonitor_data/DropDownButton.js"></script>
<script type="text/javascript" src="procmonitor_data/CheckBox.js"></script>
<script type="text/javascript" src="procmonitor_data/RadioButton.js"></script>
<script type="text/javascript" src="procmonitor_data/CheckBoxGroup.js"></script>
<script type="text/javascript" src="procmonitor_data/RadioButtonGroup.js"></script>
<script type="text/javascript" src="procmonitor_data/FileInput.js"></script>
<script type="text/javascript" src="procmonitor_data/FormListBinding.js"></script>
<script type="text/javascript" src="procmonitor_data/FormList.js"></script>
<script type="text/javascript" src="procmonitor_data/Tree.js"></script>
<script type="text/javascript" src="procmonitor_data/Container.js"></script>
<script type="text/javascript" src="procmonitor_data/TitlePane.js"></script>
<script type="text/javascript" src="procmonitor_data/TabContainer.js"></script>
<script type="text/javascript" src="procmonitor_data/AdaptiveContainer.js"></script>
<script type="text/javascript" src="procmonitor_data/BorderContainer.js"></script>
<script type="text/javascript" src="procmonitor_data/BorderPane.js"></script>
<script type="text/javascript" src="procmonitor_data/Grid.js"></script>
<script type="text/javascript" src="procmonitor_data/Grid_002.js"></script>
<script type="text/javascript" src="procmonitor_data/DialogUtil.js"></script>
<script type="text/javascript" src="procmonitor_data/xDialogUtil.js"></script>
<script type="text/javascript" src="procmonitor_data/xDialog.js"></script>
<script type="text/javascript" src="procmonitor_data/MessageBox.js"></script>
<script type="text/javascript" src="procmonitor_data/Menu.js"></script>
<script type="text/javascript" src="procmonitor_data/Tooltip.js"></script>
<script type="text/javascript" src="procmonitor_data/ProgressBar.js"></script>
<script type="text/javascript" src="procmonitor_data/rpc.js"></script>
<script type="text/javascript" src="procmonitor_data/view.js"></script>

<script type="text/javascript" src="procmonitor_data/HBoxContainer.js"></script>
<script type="text/javascript" src="procmonitor_data/VBoxContainer.js"></script>
<script type="text/javascript" src="procmonitor_data/StackContainer.js"></script>
<script type="text/javascript" src="procmonitor_data/AccordionPane.js" charset="utf-8"></script>
<script type="text/javascript" src="procmonitor_data/AccordionContainer.js" charset="utf-8"></script>
<script type="text/javascript" src="procmonitor_data/MultilineTextBox.js"></script>

<script type="text/javascript" src="procmonitor_data/MessageCenter.js"></script>
<script type="text/javascript" src="procmonitor_data/TraceMessageBox.js"></script>
<script type="text/javascript" src="procmonitor_data/Query.js"></script>
<script type="text/javascript" src="procmonitor_data/Binding.js"></script>
<script type="text/javascript" src="procmonitor_data/AdvancedQuery.js"></script>
<script type="text/javascript" src="procmonitor_data/FormList.js"></script>
<script type="text/javascript" src="procmonitor_data/FormListBinding.js"></script>
<script type="text/javascript" src="procmonitor_data/QuickSearch.js"></script>
<script type="text/javascript" src="procmonitor_data/Handler.js"></script>
<script type="text/javascript" src="procmonitor_data/NavigatorContainer.js"></script>
<script type="text/javascript" src="procmonitor_data/NavigatorController.js"></script>
<script type="text/javascript" src="procmonitor_data/NavigatorPane.js"></script>

<script type="text/javascript" src="procmonitor_data/NumberSpinner.js"></script>
<script type="text/javascript" src="procmonitor_data/Slider.js"></script>
<script type="text/javascript" src="procmonitor_data/IpAddress.js"></script>

<script type="text/javascript" src="procmonitor_data/common.js"></script> 

<!-- 加載工作流擴展的RIA -->
<script type="text/javascript" src="procmonitor_data/i18n_zh_CN_002.js" load="cache"></script> 
<script type="text/javascript" src="procmonitor_data/toolbar.js"></script> 
<script type="text/javascript" src="procmonitor_data/SelectionManager_002.js"></script> 
<script type="text/javascript" src="procmonitor_data/toolbar_002.js" load="cache"></script> 
<script type="text/javascript" src="procmonitor_data/loader_002.js" load="cache"></script> 
<script type="text/javascript" src="procmonitor_data/SelectionManager.js" load="cache"></script> 
<script type="text/javascript" src="procmonitor_data/rpc_003.js" load="cache"></script> 

<script type="text/javascript" src="procmonitor_data/jquery-1.js" load="cache"></script>
<script type="text/javascript" src="procmonitor_data/jquery-ui-1.js" load="cache"></script>
 <script type="text/javascript" src="procmonitor_data/jquery_002.js" load="cache"></script>
  <script type="text/javascript" src="procmonitor_data/tab.js" load="cache"></script>
  <script type="text/javascript" src="procmonitor_data/template.js" load="cache"></script>
  <script type="text/javascript" src="procmonitor_data/jquery.js" load="cache"></script>
  <script type="text/javascript" src="procmonitor_data/jquery_004.js" load="cache"></script>
   <script type="text/javascript" src="procmonitor_data/bpopup.js"></script>
   <script type="text/javascript" src="procmonitor_data/tooltip.js" load="cache"></script>
   <script type="text/javascript" src="procmonitor_data/dialog.js"></script>
<script type="text/javascript" src="procmonitor_data/i18n_zh_CN.js" load="cache"></script>
<script type="text/javascript" src="procmonitor_data/util.js" load="cache"></script>

<script type="text/javascript">

	var dataCenter = new unieap.ds.DataCenter();/*用于单帧菜单，非单帧情况可以不定义*/
	unieap.WEB_APP_NAME = "/fp";
	unieap.WORKFLOW_PATH="/fp/workflow";
	unieap.locale = "zh_CN";
	unieap.userAccount = false?null:"2018012082";
	unieap.userName=false?null:"张锦程";
	unieap.userType="1";
	unieap.cmpPath = "/fp/workflow/procinst/monitor/swf/entry/procmonitor.jsp";
	dojo.addOnLoad(function(){
		dojo.style(document.body,"visibility","visible");
	});
	
	
	dataCenter.setParameter("procinstId","2101121503493121");
	
	if(typeof(RIA_UNIEAPX_I18N)=='undefined'){
		dojo.require("unieapx.nls.application_"+unieap.locale);
	}
	/*存储每个页面中view和viewc的名字，单帧下key为rootNodeId，非单帧下为viewContext*/
  	if(typeof(unieapViewContextHolder) == "undefined"){
		unieapViewContextHolder = {};
	}
</script>

	 <style type="text/css">
		 .monitor_iframe_border{
		 	border: 2px solid #B5B9BD;
		 }
	 </style>
	 <script language="JavaScript">
	 	var patterFlag = "H5-Monitor";
	 </script>
     <link type="text/css" rel="stylesheet" href="procmonitor_data/common.css">
     <link type="text/css" rel="stylesheet" href="procmonitor_data/dialog.css">
     <script type="text/javascript" src="procmonitor_data/jquery-ui-1.js"></script>
     <script type="text/javascript" src="procmonitor_data/jquery_003.js"></script>
     <script type="text/javascript" src="procmonitor_data/dialog.js"></script>
     <script type="text/javascript" src="procmonitor_data/AC_OETags.js"></script>
     <script language="JavaScript" src="procmonitor_data/OpenWin.js"></script>
     <script type="text/javascript" src="procmonitor_data/procmonitor-view.js"></script>
<!--      Flex设计器，不要引用下面这个JS -->
     <script type="text/javascript" src="procmonitor_data/h5-procMonitor.js"></script>
     <script type="text/javascript" src="procmonitor_data/XmlJsonUtil.js"></script>
     <script language="JavaScript">
	      var procInstId = "2101121503493121";
	       var procinstid = "2101121503493121";
	        var contextPath="/fp";
	     function rollback(xmlstr,ids){
	         var idArray=ids.split(";");
	    	 var typeAndId=idArray[0].split(",");
	    	 var type=typeAndId[0];
	    	 var id  =typeAndId[1];
	    	 var tagName=getNameBaseType(type);
	    	 var item=eval("("+XmlToJson(xmlstr,type,id)+")");
	    	 procmonitor.actRollBack(item);
	     }
	     
	     function actComplete(xmlstr,ids) {
	    	 var idArray=ids.split(";");
	    	 var typeAndId=idArray[0].split(",");
	    	 var type=typeAndId[0];
	    	 var id  =typeAndId[1];
	    	 var tagName=getNameBaseType(type);
	    	 var item=eval("("+XmlToJson(xmlstr,type,id)+")");
	    	 var actInstId=item.instId;
	    	 procmonitor.actComplete(actInstId);
	    }
	     
	     function itemSelected(xmlstr,ids){
	    	 var idArray=ids.split(";");
	    	 //目前只取第一个选中节点，作为示例
	    	 var typeAndId=idArray[0].split(",");
	    	 var type=typeAndId[0]; 
	    	 var id  =typeAndId[1];
	    	 var tagName=getNameBaseType(type);
	    	 var item=eval("("+XmlToJson(xmlstr,type,id)+")");
	    	 procmonitor.loadDetail(type,item);
	     }
	     
	     function doAbort(){
	    	 procmonitor.doAbort(procInstId);
	     }
	     
	     function doComplete(targetID,xmlstr,ids){
	    	 procmonitor.doComplete(procInstId);
	     }
	     
	     function doResume(){
	    	 procmonitor.doResume(procInstId);
	     }
	     
	     function doSuspend(){
	    	 procmonitor.doSuspend(procInstId);
	     }
	     
	     function doRestart(){
	    	 procmonitor.doRestart(procInstId);
	     }
	     
	     function refresh(){
	    	 procmonitor.refresh(procInstId);
	     }
	
	  </script>
  </head>
  <body class="unieap dijit_a11y" style="height: 96%; overflow: hidden; visibility: visible;"><a href="javascript:void(0);" id="unieap_for_focus" class="u-common-focus" tabindex="-1"></a>
     <table width="100%" height="100%">
       <tbody><tr height="90%"> 
         <td class="monitor_iframe_border" width="100%">
         	<script language="JavaScript" type="text/javascript"> 
         	if(patterFlag=='H5-Monitor'){//H5监控
         		procInstId = procInstId ? procInstId : "";
         		var dc = new unieap.ds.DataCenter();
         		var ctrlFlag=false;
         		var ddc=unieap.Action.requestData({
        			url:unieap.WORKFLOW_PATH+"/svgMonitor.action?procinstId="+procInstId,
        			sync:true,
        			load:function(dc,ds){
        			    ctrlFlag=true;
        			}
           		 },dc);
         		if(ctrlFlag){
	       		     var procdefid = ddc.getParameter("procdefId");
	       		     var version = ddc.getParameter("version");
	       		     var line = ddc.getParameter("line");
	       		     var lineArray = line&&line.split("#");
	       		     var curStr = ddc.getParameter("curStr");
	       		     var flag=ddc.getParameter("curstate");
	       		     if(flag=="null"){
	       		    	 flag="-1";
       		     		}
       		     var oplevel=ddc.getParameter("oplevel");
       		     var v="hidden";
         		setProcMakerIFrame(procInstId,procdefid,version,'processMonitor',contextPath,line,curStr,flag);
         		}
         	}else{//Flex监控
         		 var dc = new unieap.ds.DataCenter();
         	 	
        	 	 procInstId = procInstId ? procInstId : "";
        	 	 var ctrlFlag=false;
        	 	 var ddc=unieap.Action.requestData({
        			url:unieap.WORKFLOW_PATH+"/svgMonitor.action?procinstId="+procInstId,
        			sync:true,
        			load:function(dc,ds){
        			    ctrlFlag=true;
        			}
           		 },dc);
        	 	 
        	    if(ctrlFlag){
        	     var procdefid = ddc.getParameter("procdefId");
        	     var version = ddc.getParameter("version");
        	     var line = ddc.getParameter("line");
        	     var lineArray = line&&line.split("#");
        	     var curStr = ddc.getParameter("curStr");
        	     var flag=ddc.getParameter("curstate");
        	     if(flag=="null"){
        	    	 flag="-1";
        	     }
        	     var oplevel=ddc.getParameter("oplevel");
        	     var v="hidden";
        	    
        	   
        	     // Major version of Flash required
        	     var requiredMajorVersion = 9;
        	     // Minor version of Flash required
        	     var requiredMinorVersion = 0;
        	     // Minor version of Flash required
        	     var requiredRevision = 115;
                 <!--
        	      // Version check for the Flash Player that has the ability to start Player Product Install (6.0r65)
        	      var hasProductInstall = DetectFlashVer(6, 0, 65);
        	      // Version check based upon the values defined in globals
        	      var hasRequestedVersion = DetectFlashVer(requiredMajorVersion, requiredMinorVersion, requiredRevision);

        	      if ( hasProductInstall && !hasRequestedVersion ) {
        	      	// DO NOT MODIFY THE FOLLOWING FOUR LINES
        	      	// Location visited after installation is complete if installation is required
        	      	var MMPlayerType = (isIE == true) ? "ActiveX" : "PlugIn";
        	      	var MMredirectURL = window.location;
        	          document.title = document.title.slice(0, 47) + " - Flash Player Installation";
        	          var MMdoctitle = document.title;
        	      	AC_FL_RunContent(
        	      		"src", "playerProductInstall",
        	              "FlashVars", "MMredirectURL="+MMredirectURL+'&MMplayerType='+MMPlayerType+'&selectedID='+"2101121503493121"+'&isCreateNewProcess='+'false'+'&isNewVersion='+'false'+'&procinstID='+'2101121503493121'+'&operatable='+'false'+'&editable='+'false'+'&path='+"/fp"+"",
        	      		"width", "943",
        	      		"height", "566",
        	      		"align", "middle",
        	      		"id", "workflow",
        	      		"quality", "high",
        	      		"bgcolor", "#869ca7",
        	      		"name", "workflow",
        	      		"allowScriptAccess","sameDomain",
        	      		"type", "application/x-shockwave-flash",
        	      		"pluginspage", "http://www.adobe.com/go/getflashplayer"
        	      	);
        	      	
        	      } else if (hasRequestedVersion) {
        	
        	      	// if we've detected an acceptable version
        	      	// embed the Flash Content SWF when all tests are passed
        	      	AC_FL_RunContent(
        	      			"src", "/fp/workflow/processCommon/swf/workflow",
        	                  "FlashVars", "MMredirectURL="+MMredirectURL+'&MMplayerType='+MMPlayerType+'&selectedID='+procdefid+'&selectedVersion='+version+'&pattern='+'Monitor'+'&isCreateNewProcess='+'false'+'&isNewVersion='+'false'+'&procinstID='+'2101121503493121'+'&operatable='+'false'+'&editable='+'false'+'&path='+"/fp"+'&confPath=/workflow/processCommon/swf'+'&oplevel='+oplevel+'&flag='+flag+"&line="+line+"&curID="+curStr+"&scaleX=1&scaleY=1"+"",
        	      			"width", "100%",
        	      			"height", "100%",
        	      			"align", "middle",
        	      			"id", "workflow", 
        	      			"quality", "high",
        	      			"bgcolor", "#869ca7",
        	      			"name", "workflow",
        	      			"allowScriptAccess","sameDomain",
        	      			"type", "application/x-shockwave-flash",
        	      			"pluginspage", "http://www.adobe.com/go/getflashplayer"
        	      	);
        	        } else {
        	          var url= "/fp/workflow/webdesign/designer/flash.jsp";
        	          var width = 420;
        	          var height = 240; 
        	          open_scrollable_window(url,width,height); 
        	        }
        	    }
         	}
         		
          	</script><iframe id="resourceViewIFrame" src="procmonitor_data/processmonitor.htm" style="width:100%;height:100%;border:0px;background: #fff;"></iframe>
         </td>
       </tr>
	   <tr height="1%">
	    <td colspan="2" valign="middle">
		 <table id="tableFrame" style="display:none">
		   <tbody><tr valign="top">
			  <td width="10" valign="middle" align="left"><img style="width:16px; height:16px; margin: 2px;" src="procmonitor_data/default_icon.svg"></td>
			  <td class="input_text" width="40" valign="middle" align="left">初始态</td>
			  <td width="10" valign="middle" align="left"><img style="width:16px; height:16px; margin: 2px;" src="procmonitor_data/running_icon.svg"></td>
		      <td class="input_text" width="40" valign="middle" align="left">运行态</td>
			  <td width="10" valign="middle" align="left"><img style="width:16px; height:16px; margin: 2px;" src="procmonitor_data/activate_icon.svg"></td>
		      <td class="input_text" width="40" valign="middle" align="left">激活态</td>
			  <td width="10" valign="middle" align="left"><img style="width:16px; height:16px; margin: 2px;" src="procmonitor_data/hang_icon.svg"></td>
		      <td class="input_text" width="40" valign="middle" align="left">挂起态</td>
			  <td width="10" valign="middle" align="left"><img style="width:16px; height:16px; margin: 2px;" src="procmonitor_data/complete_icon.svg"></td>
		      <td class="input_text" width="40" valign="middle" align="left">完成态</td>
			  <td width="10" valign="middle" align="left"><img style="width:16px; height:16px; margin: 2px;" src="procmonitor_data/termination_icon.svg"></td>
		      <td class="input_text" width="40" valign="middle" align="left">终止态</td>
		      <td>&nbsp;</td>
			 </tr>
		 </tbody></table>
		</td>
	   </tr>
     </tbody></table>
  
</body></html>